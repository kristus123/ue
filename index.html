<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Electron App Launcher</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="app-launcher">
    <input type="text" id="searchInput" placeholder="Search for apps..." />
    <ul id="appList">
      <!-- Placeholder apps will be listed here -->
    </ul>
  </div>

  <script>
    const searchInput = document.getElementById('searchInput');
    const appList = document.getElementById('appList');

    // Example list of placeholder apps
    const apps = ['App 1', 'App 2', 'App 3'];

    // Populate the list with apps
    function populateList(query = '') {
      // Filter apps based on the search query
      const filteredApps = apps.filter(app => app.toLowerCase().includes(query.toLowerCase()));

      // Clear previous results
      appList.innerHTML = '';

      // Display matching apps
      filteredApps.forEach((app, index) => {
        const li = document.createElement('li');
        li.textContent = app;
        li.dataset.index = index;
        li.setAttribute('tabindex', 0); // Make list items focusable
        appList.appendChild(li);
	
        // Event listener for Enter key press (on each li)
        li.addEventListener('keydown', (e) => {
          if (e.key === 'Enter') {
            console.log(`${app} executed`); // Log app execution
            window.electronAPI.hideWindow(app); // This will trigger the hide in main.js
          } else if (e.key === 'Tab') {
            e.preventDefault();  // Prevent the default tab behavior
            const nextApp = li.nextElementSibling || appList.firstElementChild;
            if (nextApp) nextApp.focus();
          }
        });
      });

      // If no apps match, show a no results message
      if (filteredApps.length === 0) {
        const li = document.createElement('li');
        li.textContent = 'No results found';
        appList.appendChild(li);
      }

      // Focus the first item after populating the list
      const firstApp = appList.querySelector('li');
      if (firstApp) {
        firstApp.focus();
      }
    }

    // Initially populate the list
    populateList();

    // Focus the search bar when 'z' key is pressed
    window.addEventListener('keydown', (e) => {
      if (e.key === 'z') {
        searchInput.focus();
      }
    });

    // Search for apps as the user types
    searchInput.addEventListener('input', () => {
      const query = searchInput.value;
      populateList(query);
    });
  </script>
</body>
</html>
